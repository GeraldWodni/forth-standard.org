doctype xml

mixin gravatar( emailMd5, name, size, def )
    - def = def || "retro"
    img(src="/proxy/gravatar/#{emailMd5}/#{size}/#{def}",alt="avatar of #{name}")&attributes(attributes)

feed(xml:base="https://forth-standard.org",xmlns="http://www.w3.org/2005/Atom")
    title Forth Standard
    id https://forth-standard.org/feeds/latest
    icon /images/favicon.png
    logo /images/forth.png
    link(rel="self",href="https://forth-standard.org/feeds/latest")
    updated= moment(contributions[0][''].updated).toISOString()
    each entry in contributions
        entry
            if entry[''].replyId > 0
                link= entry.contributions.url + "#reply-" + entry[''].replyId
            else
                link= entry.contributions.url + "#contribution-" + entry.contributions.id
            title= "[" + contributionTypeName[entry.contributions.type] + "] " + entry.contributions.subject
            icon= "/proxy/gravatar/" + entry.users.emailMd5 + "/40/retro"
            author
                uri= "/~" + entry.users.name
                name= entry.users.name
            updated= moment(entry.contributions.created).toISOString()
            updated= moment(entry[''].updated).toISOString()
